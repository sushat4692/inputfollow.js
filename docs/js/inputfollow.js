/*!
  inputfollow v0.0.1
  undefined
  Released under the MIT License.
*/
var Inputfollow = (function () {
    'use strict';

    var _assign = function __assign() {
      _assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];

          for (var p in s) {
            if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
          }
        }

        return t;
      };

      return _assign.apply(this, arguments);
    };

    /**
     * Check required of target field element's value
     * @param el
     * @returns boolean
     */
    var check = function (el) {
        var tag = el.tagName.toLowerCase();
        var type = el.getAttribute('type');
        var name = el.getAttribute('name');
        if (tag === 'input' && (type === 'radio' || type === 'checkbox')) {
            return (document.querySelectorAll("input[name=\"".concat(name, "\"]:checked")).length >
                0);
        }
        return el.value.replace(/\s/, '') !== '';
    };

    var validate = function (el, rule) {
        var errors = [];
        if (!Array.isArray(rule)) {
            rule = [rule];
        }
        rule.map(function (r) {
            switch (r.type) {
                case 'required':
                    if (!check(el)) {
                        if (r.message) {
                            errors.push({
                                type: r.type,
                                message: r.message,
                            });
                        }
                    }
                    break;
            }
        });
        return errors;
    };

    var createElement = function (el, params, errors) {
        if (!el) {
            throw Error("Not found target field element");
        }
        var name = el.getAttribute('name');
        // let errors: ValidatedError[] = []
        var rule = (function () {
            if (!name || !params.rules || !(name in params.rules)) {
                return null;
            }
            return params.rules[name];
        })();
        var validate$1 = function (init) {
            if (init === void 0) { init = false; }
            if (!rule || !name) {
                return;
            }
            errors[name] = validate(el, rule);
            if (hasError()) {
                if (params.valid_class) {
                    el.classList.remove(params.valid_class);
                }
                if (init !== true) {
                    if (params.error_class) {
                        el.classList.add(params.error_class);
                    }
                }
            }
            else {
                if (params.error_class) {
                    el.classList.remove(params.error_class);
                }
                if (params.valid_class) {
                    el.classList.add(params.valid_class);
                }
            }
        };
        var hasError = function () {
            if (!name) {
                return false;
            }
            return errors[name].length > 0;
        };
        var getErrors = function () {
            if (!name) {
                return [];
            }
            return errors[name];
        };
        el.addEventListener('blur', function () {
            validate$1();
        });
        return { el: el, name: name, rule: rule, validate: validate$1, hasError: hasError, getErrors: getErrors };
    };

    var index = (function (formEl, params) {
        /**
         * Convert formEl to HTMLFormElement if it's string
         */
        if (typeof formEl === 'string') {
            var el = document.querySelector(formEl);
            if (!el) {
                throw new Error("Not found target form element: ".concat(formEl));
            }
            formEl = el;
        }
        if (formEl.tagName !== 'FORM') {
            throw new Error("Target element is not <form> element");
        }
        formEl.addEventListener('submit', function (e) {
            var flag = true;
            validate();
            Object.keys(errors).map(function (key) {
                var error = errors[key];
                flag = flag && error.length <= 0;
            });
            if (!flag) {
                e.preventDefault();
                return false;
            }
            return true;
        });
        /**
         * Find submit button if it's specified
         */
        var submitButton = (function () {
            if (!params.submit_button) {
                return null;
            }
            if (typeof params.submit_button === 'string') {
                return formEl.querySelector(params.submit_button);
            }
            return params.submit_button;
        })();
        /**
         * Arranged params
         */
        var defaultParams = { error_class: 'error', valid_class: 'valid' };
        params = _assign(_assign({}, defaultParams), params);
        /**
         * Prepare Proxy for observing errors values
         */
        var errors = new Proxy({}, {
            set: function (target, p, value, receiver) {
                var set = Reflect.set(target, p, value, receiver);
                if (set && submitButton) {
                    var flag_1 = true;
                    Object.keys(errors).map(function (key) {
                        var error = errors[key];
                        flag_1 = flag_1 && error.length <= 0;
                    });
                    if (flag_1) {
                        submitButton.removeAttribute('disabled');
                    }
                    else {
                        submitButton.setAttribute('disabled', 'disabled');
                    }
                }
                return set;
            },
        });
        /**
         * Preparing Checking Elements
         */
        var inputs = formEl.querySelectorAll('input,textarea,select');
        var elements = [];
        inputs.forEach(function (input) {
            var Element = createElement(input, params, errors);
            if (!Element) {
                return;
            }
            elements.push(Element);
        });
        /**
         * Start validating
         */
        var validate = function (init) {
            if (init === void 0) { init = false; }
            elements.map(function (element) {
                element.validate(init);
            });
        };
        // Initial validate
        validate(true);
        return { formEl: formEl, elements: elements, validate: validate };
    });

    return index;

})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRmb2xsb3cuanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi9zcmMvdmFsaWRhdGUvUmVxdWlyZWQudHMiLCIuLi9zcmMvdmFsaWRhdGUvaW5kZXgudHMiLCIuLi9zcmMvbW9kZWwvRWxlbWVudC50cyIsIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuIiwiaW1wb3J0IHsgRmllbGRFbGVtZW50IH0gZnJvbSAnLi4vdHlwZXMnXG5cbi8qKlxuICogQ2hlY2sgcmVxdWlyZWQgb2YgdGFyZ2V0IGZpZWxkIGVsZW1lbnQncyB2YWx1ZVxuICogQHBhcmFtIGVsXG4gKiBAcmV0dXJucyBib29sZWFuXG4gKi9cbmV4cG9ydCBjb25zdCBjaGVjayA9IChlbDogRmllbGRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgY29uc3QgdHlwZSA9IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpXG4gICAgY29uc3QgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpXG5cbiAgICBpZiAodGFnID09PSAnaW5wdXQnICYmICh0eXBlID09PSAncmFkaW8nIHx8IHR5cGUgPT09ICdjaGVja2JveCcpKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBpbnB1dFtuYW1lPVwiJHtuYW1lfVwiXTpjaGVja2VkYCkubGVuZ3RoID5cbiAgICAgICAgICAgIDBcbiAgICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBlbC52YWx1ZS5yZXBsYWNlKC9cXHMvLCAnJykgIT09ICcnXG59XG4iLCJpbXBvcnQgeyBGaWVsZEVsZW1lbnQsIFJ1bGVPcHRpb24sIFZhbGlkYXRlZEVycm9yIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmltcG9ydCB7IGNoZWNrIGFzIGNoZWNrUmVxdWlyZWQgfSBmcm9tICcuL1JlcXVpcmVkJ1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGUgPSAoZWw6IEZpZWxkRWxlbWVudCwgcnVsZTogUnVsZU9wdGlvbiB8IFJ1bGVPcHRpb25bXSkgPT4ge1xuICAgIGNvbnN0IGVycm9yczogVmFsaWRhdGVkRXJyb3JbXSA9IFtdXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHJ1bGUpKSB7XG4gICAgICAgIHJ1bGUgPSBbcnVsZV1cbiAgICB9XG5cbiAgICBydWxlLm1hcCgocikgPT4ge1xuICAgICAgICBzd2l0Y2ggKHIudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAncmVxdWlyZWQnOlxuICAgICAgICAgICAgICAgIGlmICghY2hlY2tSZXF1aXJlZChlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHIudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGVycm9yc1xufVxuIiwiaW1wb3J0IHsgdmFsaWRhdGUgYXMgZXhlY1ZhbGlkYXRlIH0gZnJvbSAnLi4vdmFsaWRhdGUnXG5cbmltcG9ydCB7IEluaXRpYWxQYXJhbSwgRmllbGRFbGVtZW50LCBWYWxpZGF0ZWRFcnJvciB9IGZyb20gJy4uL3R5cGVzJ1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudCA9IChcbiAgICBlbDogRmllbGRFbGVtZW50LFxuICAgIHBhcmFtczogSW5pdGlhbFBhcmFtLFxuICAgIGVycm9yczogeyBba2V5OiBzdHJpbmddOiBWYWxpZGF0ZWRFcnJvcltdIH1cbikgPT4ge1xuICAgIGlmICghZWwpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYE5vdCBmb3VuZCB0YXJnZXQgZmllbGQgZWxlbWVudGApXG4gICAgfVxuXG4gICAgY29uc3QgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpXG4gICAgLy8gbGV0IGVycm9yczogVmFsaWRhdGVkRXJyb3JbXSA9IFtdXG4gICAgY29uc3QgcnVsZSA9ICgoKSA9PiB7XG4gICAgICAgIGlmICghbmFtZSB8fCAhcGFyYW1zLnJ1bGVzIHx8ICEobmFtZSBpbiBwYXJhbXMucnVsZXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5ydWxlc1tuYW1lXVxuICAgIH0pKClcbiAgICBjb25zdCB2YWxpZGF0ZSA9IChpbml0OiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICAgICAgaWYgKCFydWxlIHx8ICFuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGVycm9yc1tuYW1lXSA9IGV4ZWNWYWxpZGF0ZShlbCwgcnVsZSlcblxuICAgICAgICBpZiAoaGFzRXJyb3IoKSkge1xuICAgICAgICAgICAgaWYgKHBhcmFtcy52YWxpZF9jbGFzcykge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUocGFyYW1zLnZhbGlkX2NsYXNzKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5pdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuZXJyb3JfY2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChwYXJhbXMuZXJyb3JfY2xhc3MpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHBhcmFtcy5lcnJvcl9jbGFzcykge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUocGFyYW1zLmVycm9yX2NsYXNzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtcy52YWxpZF9jbGFzcykge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQocGFyYW1zLnZhbGlkX2NsYXNzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaGFzRXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXJyb3JzW25hbWVdLmxlbmd0aCA+IDBcbiAgICB9XG5cbiAgICBjb25zdCBnZXRFcnJvcnMgPSAoKSA9PiB7XG4gICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXJyb3JzW25hbWVdXG4gICAgfVxuXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcbiAgICAgICAgdmFsaWRhdGUoKVxuICAgIH0pXG4gICAgcmV0dXJuIHsgZWwsIG5hbWUsIHJ1bGUsIHZhbGlkYXRlLCBoYXNFcnJvciwgZ2V0RXJyb3JzIH1cbn1cbiIsImltcG9ydCB7IEluaXRpYWxQYXJhbSwgRm9ybUVsZW1lbnQsIFZhbGlkYXRlZEVycm9yIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuL21vZGVsL0VsZW1lbnQnXG5cbmV4cG9ydCBkZWZhdWx0IChmb3JtRWw6IEZvcm1FbGVtZW50LCBwYXJhbXM6IEluaXRpYWxQYXJhbSkgPT4ge1xuICAgIC8qKlxuICAgICAqIENvbnZlcnQgZm9ybUVsIHRvIEhUTUxGb3JtRWxlbWVudCBpZiBpdCdzIHN0cmluZ1xuICAgICAqL1xuICAgIGlmICh0eXBlb2YgZm9ybUVsID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybUVsKVxuXG4gICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGZvdW5kIHRhcmdldCBmb3JtIGVsZW1lbnQ6ICR7Zm9ybUVsfWApXG4gICAgICAgIH1cblxuICAgICAgICBmb3JtRWwgPSBlbCBhcyBIVE1MRm9ybUVsZW1lbnRcbiAgICB9XG5cbiAgICBpZiAoZm9ybUVsLnRhZ05hbWUgIT09ICdGT1JNJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhcmdldCBlbGVtZW50IGlzIG5vdCA8Zm9ybT4gZWxlbWVudGApXG4gICAgfVxuXG4gICAgZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGxldCBmbGFnID0gdHJ1ZVxuXG4gICAgICAgIHZhbGlkYXRlKClcblxuICAgICAgICBPYmplY3Qua2V5cyhlcnJvcnMpLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGVycm9yc1trZXldXG4gICAgICAgICAgICBmbGFnID0gZmxhZyAmJiBlcnJvci5sZW5ndGggPD0gMFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghZmxhZykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSlcblxuICAgIC8qKlxuICAgICAqIEZpbmQgc3VibWl0IGJ1dHRvbiBpZiBpdCdzIHNwZWNpZmllZFxuICAgICAqL1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9ICgoKSA9PiB7XG4gICAgICAgIGlmICghcGFyYW1zLnN1Ym1pdF9idXR0b24pIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy5zdWJtaXRfYnV0dG9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1FbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy5zdWJtaXRfYnV0dG9uKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5zdWJtaXRfYnV0dG9uXG4gICAgfSkoKVxuXG4gICAgLyoqXG4gICAgICogQXJyYW5nZWQgcGFyYW1zXG4gICAgICovXG4gICAgY29uc3QgZGVmYXVsdFBhcmFtcyA9IHsgZXJyb3JfY2xhc3M6ICdlcnJvcicsIHZhbGlkX2NsYXNzOiAndmFsaWQnIH1cbiAgICBwYXJhbXMgPSB7IC4uLmRlZmF1bHRQYXJhbXMsIC4uLnBhcmFtcyB9XG5cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIFByb3h5IGZvciBvYnNlcnZpbmcgZXJyb3JzIHZhbHVlc1xuICAgICAqL1xuICAgIGNvbnN0IGVycm9ycyA9IG5ldyBQcm94eTx7IFtrZXk6IHN0cmluZ106IFZhbGlkYXRlZEVycm9yW10gfT4oXG4gICAgICAgIHt9LFxuICAgICAgICB7XG4gICAgICAgICAgICBzZXQ6ICh0YXJnZXQsIHAsIHZhbHVlLCByZWNlaXZlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNldCA9IFJlZmxlY3Quc2V0KHRhcmdldCwgcCwgdmFsdWUsIHJlY2VpdmVyKVxuICAgICAgICAgICAgICAgIGlmIChzZXQgJiYgc3VibWl0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmbGFnID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGVycm9ycykubWFwKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZXJyb3JzW2tleV1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmbGFnICYmIGVycm9yLmxlbmd0aCA8PSAwXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0XG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgKVxuXG4gICAgLyoqXG4gICAgICogUHJlcGFyaW5nIENoZWNraW5nIEVsZW1lbnRzXG4gICAgICovXG4gICAgY29uc3QgaW5wdXRzID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGw8XG4gICAgICAgIEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MU2VsZWN0RWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnRcbiAgICA+KCdpbnB1dCx0ZXh0YXJlYSxzZWxlY3QnKVxuICAgIGNvbnN0IGVsZW1lbnRzOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVFbGVtZW50PltdID0gW11cbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgY29uc3QgRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoaW5wdXQsIHBhcmFtcywgZXJyb3JzKVxuXG4gICAgICAgIGlmICghRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHMucHVzaChFbGVtZW50KVxuICAgIH0pXG5cbiAgICAvKipcbiAgICAgKiBTdGFydCB2YWxpZGF0aW5nXG4gICAgICovXG4gICAgY29uc3QgdmFsaWRhdGUgPSAoaW5pdDogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGVsZW1lbnRzLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC52YWxpZGF0ZShpbml0KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIEluaXRpYWwgdmFsaWRhdGVcbiAgICB2YWxpZGF0ZSh0cnVlKVxuXG4gICAgcmV0dXJuIHsgZm9ybUVsLCBlbGVtZW50cywgdmFsaWRhdGUgfVxufVxuIl0sIm5hbWVzIjpbIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsImNoZWNrUmVxdWlyZWQiLCJ2YWxpZGF0ZSIsImV4ZWNWYWxpZGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7SUErQk8sSUFBSUEsT0FBUSxHQUFHLFNBQVcsUUFBQSxHQUFBO01BQzdCQSxPQUFRLEdBQUdDLE1BQU0sQ0FBQ0MsTUFBUCxJQUFpQixTQUFTRixRQUFULENBQWtCRyxDQUFsQixFQUFxQjtJQUM3QyxJQUFBLEtBQUssSUFBSUMsQ0FBSixFQUFPQyxDQUFDLEdBQUcsQ0FBWCxFQUFjQyxDQUFDLEdBQUdDLFNBQVMsQ0FBQ0MsTUFBakMsRUFBeUNILENBQUMsR0FBR0MsQ0FBN0MsRUFBZ0RELENBQUMsRUFBakQsRUFBcUQ7SUFDakRELE1BQUFBLENBQUMsR0FBR0csU0FBUyxDQUFDRixDQUFELENBQWIsQ0FBQTs7VUFDQSxLQUFLLElBQUlJLENBQVQsSUFBY0wsQ0FBZCxFQUFBO1lBQWlC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
